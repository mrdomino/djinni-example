// AUTOGENERATED FILE - DO NOT MODIFY!
// This file generated by Djinni from platform.djinni

#import "IXEError+Private.h"
#import "IXEErrorCode.h"
#import "IXEErrorCodeTranslator+Private.h"
#import <Foundation/Foundation.h>
#include <utility>

static_assert(__has_feature(objc_arc), "Djinni requires ARC to be enabled for this file");

@implementation IXEError

- (id)initWithError:(IXEError *)error
{
    if (self = [super init]) {
        _code = error.code;
        if (error.desc == nil) {
            _desc = nil;
        } else {
            _desc = [error.desc copy];
        }
    }
    return self;
}

- (id)initWithCode:(IXEErrorCode)code desc:(NSString *)desc
{
    if (self = [super init]) {
        _code = code;
        _desc = [desc copy];
    }
    return self;
}

- (id)initWithCppError:(const ::interaxon::example::Error &)error
{
    if (self = [super init]) {
        _code = [IXEErrorCodeTranslator cppErrorCodeToObjcErrorCode:error.code];
        if (error.desc) {
            _desc = [[NSString alloc] initWithBytes:(*(error.desc)).data()
                    length:(*(error.desc)).length()
                    encoding:NSUTF8StringEncoding];
        } else {
            _desc = nil;
        }
    }
    return self;
}

- (::interaxon::example::Error)cppError
{
    ::interaxon::example::ErrorCode code = [IXEErrorCodeTranslator objcErrorCodeToCppErrorCode:_code];
    std::optional<std::string> desc;
    if (_desc != nil) {
        std::string optValue([_desc UTF8String], [_desc lengthOfBytesUsingEncoding:NSUTF8StringEncoding]);
        desc = optValue;
    }
    return ::interaxon::example::Error(
            std::move(code),
            std::move(desc));
}

@end
